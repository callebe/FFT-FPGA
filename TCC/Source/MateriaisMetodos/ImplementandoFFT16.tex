\label{sec:ImplementandoFFT16}
Após implementado o processador CORDIC, é necessário montar uma primeira versão da FFT, para que seja possível testar o desempenho do processador, e o consumo de recursos da arquitetura implementada. Então, é escolhido montar uma FFT de apenas 16 pontos, o que demanda o uso de 8 unidades CORDIC, que serão suficientes para executar as 8 operações de rotacionamento vetorial por nível. A Figura (\ref{fig:ArquiteturaFFT16P}) apresenta o diagrama da arquitetura implementada.


\begin{figure}[H]
	\centering
	\captionsetup{width=1\textwidth, font=footnotesize, textfont=bf}	
	\includegraphics[width=1\linewidth]{Images/MateriaisMetodos/ArquiteturaFFT.pdf}
	\caption{Arquitetura Implementada FFT de 16 Pontos}
	\vspace{-3.5mm}
	\caption*{Fonte: Autoria Própria}
	\label{fig:ArquiteturaFFT16P}
\end{figure}

Como visto na Figura (\ref{fig:ArquiteturaFFT16P}), para receber os dados de entrada serializados,  o \textit{Input} da FFT possui um \text{Demux}, assim como a porta \textit(Output) possui um \textit{Mux}, para devolver os dados computados. Para transferir tais dados seriais via AXI, o qual realiza a ponte entre o PS e o PL, é necessário implementar tal interface para testar a FFT.  A implementação do módulo AXI, utilizado como interface para as implementações de \textit{hardware} deste trabalho, podem ser vistas no Anexo (\ref{cap:AXI}). 

Ainda na Figura (\ref{fig:ArquiteturaFFT16P}), cada unidade CORDIC possui uma ROM, que armazena os conjuntos de parâmetros otimizantes, os quais foram previamente calculados por (\ref{code:PCTBSAlterado}). A unidade \textit{Select Out} é responsável por ordenar, a cada iteração, as saídas das unidades CORDIC para o ordem adequada de entrada das unidades \textit{Butterfly}, de acordo com o diagrama da FFT por decimação na frequência, apresentado em (\ref{fig:FFT8PDIF}). A unidade \textit{Select In}, na Figura (\ref{fig:ArquiteturaFFT16P}), realiza a seleção da entrada de sinais nas unidades CORDIC, escolhendo entre o canal do \textit{Demux} dos dados de entrada, e o \textit{Feedback} da saída das unidades \textit{Butterfly}.

A arquitetura da Figura (\ref{fig:ArquiteturaFFT16P})  foi concebida de forma que a unidade \textit{Controle}, após o recebimento do sinal de \textit{Start}, acione as unidades \textit{COrdic}, iniciando a operação de rotação de vetores. Após 3 ciclos de \textit{Clock}, os sinais de saída são direcionados pelo \textit{Select Out}, controlado pela Unidade \textit{Controle}, para as unidades \textit{Butterfly} que retroalimentam o bloco \textit{Select In}. Este processo que dura 3 ciclos de \textit{clock}, caracteriza o cálculo de um nível da FFT. Como uma FFT de 16 pontos possui 4 níveis, a unidade de Controle realiza 4 iterações, retroalimentando as unidades \textit{COrdic} por meio do \textit{Select In}.

Ao final do processo de iteração dos 4 níveis da FFT, a unidade de Controle aciona o sinal de \textit{Finish Process}, sinalizando a Interface AXI que os dados já foram computados, e já podem ser transferidos ao PS de forma serial. Um ponto importante aqui, é que se faz necessário transferir apenas  metade dos sinais computados, pois o espectro de Fourier calculado é simétrico. Logo, são transferidos os 8 primeiros pontos da FFT, obedecendo a ordem \textit{Bit-Reverse}, e compensando o módulo dos sinais, transferindo os 15 \textit{bits} mais significativos de cada ponto. 
	
